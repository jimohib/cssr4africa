<launch>
    <!-- Launch RealSense camera node -->
    <!-- <include file="$(find realsense2_camera)/launch/rs_camera.launch">
        <arg name="enable_color" value="true" />
        <arg name="enable_depth" value="true" />
        <arg name="color_width" value="1280" />
        <arg name="color_height" value="720" />
        <arg name="color_fps" value="30" />
        <arg name="depth_width" value="848" />
        <arg name="depth_height" value="480" />
        <arg name="depth_fps" value="30" />
        <arg name="align_depth" value="true" />
    </include> -->

    <!-- Static transformations -->
    <node pkg="tf" type="static_transform_publisher" name="odom_to_map" args="0 0 0 0 0 0 map odom 100" />
    <node pkg="tf" type="static_transform_publisher" name="head_to_camera_link"
      args="0.1 0.0 0.2 0.0 0.0 0.0 Head camera_link 100" />

    <!-- Launch robotLocalization_node -->
    <node pkg="cssr_system" type="robotLocalization" name="robotLocalization" output="screen">
        <param name="verbose" value="false" />
        <param name="use_depth" value="false" />
        <param name="use_head_yaw" value="true" />
        <param name="head_yaw_joint_name" value="HeadYaw" />
        <param name="reset_interval" value="30.0" />
        <param name="absolute_pose_timeout" value="300.0" />
        <param name="landmark_file" value="$(find cssr_system)/robotLocalization/data/landmarks.json" />
        <param name="topics_file" value="$(find cssr_system)/robotLocalization/data/pepperTopics.dat" />
        <param name="camera_info_file" value="$(find cssr_system)/robotLocalization/config/camera_info.json" />
        <param name="camera_info_timeout" value="15.0" />
        <param name="map_frame" value="map" />
        <param name="odom_frame" value="odom" />
        <param name="perform_startup_localization" value="true" />    <!-- Localize immediately on startup -->
        <param name="use_interval_timer" value="false" />            <!-- Disable interval-based localization -->
        <param name="enable_head_scanning" value="true" />           <!-- Enable active head scanning -->
        <param name="head_scan_range" value="1.57" />               <!-- Â±90 degrees (1.57 radians) -->
        <param name="head_scan_step" value="0.52" />                <!-- 30 degrees (0.52 radians) step -->
        <param name="head_scan_speed" value="0.5" />                <!-- Head movement speed -->
        <param name="head_scan_timeout" value="30.0" />             <!-- Maximum time for head scanning -->
        <param name="marker_detection_threshold" value="3.0" />     <!-- Minimum markers needed for localization -->
    </node>
</launch>